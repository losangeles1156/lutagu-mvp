# BambiGO_MVP 前端UI審查與測試計劃

## 📋 任務概述

對 BambiGO_MVP 前端UI介面進行嚴謹且全面的審查與測試，確保所有內容正確渲染且功能運作正常。

---

## 🚨 阻斷性問題（優先處理）

### P0-1: station_wisdom_generated.ts 語法錯誤

**檔案**: [`src/data/station_wisdom_generated.ts`](src/data/station_wisdom_generated.ts:600)

**錯誤類型**: JSON 語法錯誤 - 陣列元素缺少逗號分隔

**問題位置**:
```typescript
// 第 603-606 行附近
// --- 池袋轉乘陷阱 (Ikebukuro Transfer Trap) ---
{
  "id": "generated-池袋車站-東武西武陷阱-1767182229604ikebukuro",
```

**根因分析**:
- 檔案中多個陣列元素之間缺少逗號
- 在 `}` 後面應該有 `,` 但實際缺失
- 導致開發伺服器無法編譯

**修復建議**:
```typescript
// 錯誤
    }
  },
  {  // ← 缺少逗號
    "id": "generated-池袋車站-...

// 正確
    }
  },
  {
    "id": "generated-池袋車站-...
```

---

## 📝 審查範圍與測試清單

### 1. 語系切換測試 (zh-TW 繁體中文)

#### 1.1 導航選單
| 項目 | 狀態 | 備註 |
|------|------|------|
| [ ] 探索 | 待測 | `nav.explore` |
| [ ] 行程 | 待測 | `nav.trips` |
| [ ] 守護 | 待測 | `nav.guard` |
| [ ] 我的 | 待測 | `nav.me` |
| [ ] 導航 | 待測 | `nav.navigation` |

#### 1.2 按鈕標籤
| 項目 | 狀態 | 備註 |
|------|------|------|
| [ ] 加入我的行程 | 待測 | `node.addToTrip` |
| [ ] 加入收藏 | 待測 | `node.favorite` |
| [ ] 導航 | 待測 | `l1.navTo` |
| [ ] 重試 | 待測 | `error.retry` |
| [ ] 重新整理 | 待測 | `error.refresh` |
| [ ] 取消 | 待測 | `common.cancel` |
| [ ] 確認 | 待測 | `common.confirm` |

#### 1.3 對話視窗與提示
| 項目 | 狀態 | 備註 |
|------|------|------|
| [ ] 問 LUTAGU... | 待測 | `Home.askLutagu` |
| [ ] 規劃路線（問路、聊天...） | 待測 | `l4.inputPlaceholder` |
| [ ] 輸入訊息... | 待測 | `chat.placeholder` |
| [ ] 抱歉，連線發生錯誤 | 待測 | `l4.chatError` |
| [ ] 載入中... | 待測 | `common.loading` |
| [ ] 服務暫時不可用 | 待測 | `common.temporarilyUnavailable` |

#### 1.4 錯誤訊息
| 項目 | 狀態 | 備註 |
|------|------|------|
| [ ] 糟了！系統發生錯誤 | 待測 | `error.systemError` |
| [ ] 我們在載入頁面時遇到了一些問題 | 待測 | `error.loadingError` |
| [ ] 元件載入失敗 | 待測 | `error.componentError` |
| [ ] 發生錯誤 | 待測 | `common.error` |
| [ ] 連線錯誤，請稍後再試 | 待測 | `chat.connectionError` |

---

### 2. 互動元素點擊測試

#### 2.1 主要功能按鈕
| 元件 | 功能 | 預期行為 | 實際行為 | 狀態 |
|------|------|----------|----------|------|
| [ ] 開始與 AI 助手對話 | 開啟聊天 | 開啟對話視窗 | 待測 |
| [ ] 切換語言 | 語系切換 | 切換至目標語系 | 待測 |
| [ ] 導航至此 | 地圖導航 | 開啟導航功能 | 待測 |
| [ ] 查看詳情 | 展開詳情 | 顯示詳細資訊 | 待測 |
| [ ] 開啟對話 | 開啟聊天 | 開啟對話視窗 | 待測 |
| [ ] 最小化 | 最小化對話 | 收合對話視窗 | 待測 |
| [ ] 最大化 | 最大化對話 | 展開對話視窗 | 待測 |

#### 2.2 標籤頁籤
| 元件 | 功能 | 預期行為 | 狀態 |
|------|------|----------|------|
| [ ] 附近 (DNA) | L1 附近生活機能 | 切換至 DNA 標籤 | 待測 |
| [ ] 狀態 (Live) | L2 即時運行狀態 | 切換至狀態標籤 | 待測 |
| [ ] 設施 (Facility) | L3 站點設施 | 切換至設施標籤 | 待測 |
| [ ] 建議 (LUTAGU) | L4 智能建議 | 切換至建議標籤 | 待測 |
| [ ] 時刻票價 (Transit) | 時刻與票價 | 切換至時刻票價 | 待測 |

#### 2.3 卡片展開/收合
| 元件 | 功能 | 狀態 |
|------|------|------|
| [ ] 展開設施詳情 | 展開設施資訊 | 待測 |
| [ ] 展開天氣詳情 | 展開氣象資訊 | 待測 |
| [ ] 展開路線規劃 | 展開路線選項 | 待測 |

---

### 3. 風險評估

#### 3.1 潛在當機風險
| 風險項目 | 嚴重程度 | 說明 |
|----------|----------|------|
| [ ] API 請求超時 | 高 | `api/**` 路由需檢查 timeout handling |
| [ ] 未處理的例外 | 高 | Error Boundary 完整性 |
| [ ] 大量資料渲染 | 中 | station_wisdom 資料量過大 |
| [ ] 記憶體洩漏 | 中 | 地圖元件長時間使用 |
| [ ] 競爭條件 | 中 | 狀態更新衝突 |
| [ ] 無限迴圈 | 低 | useEffect 依賴陣列不當使用 |

#### 3.2 效能瓶頸
| 元件 | 潛在問題 | 檢查項目 |
|------|----------|----------|
| [地圖] | 大量標記渲染 | viewport 優化 |
| [對話] | 訊息歷史累積 | virtualization |
| [設施] | L3 資料查詢 | 延遲載入 |

#### 3.3 瀏覽器相容性
| 瀏覽器 | 版本範圍 | 狀態 |
|--------|----------|------|
| Chrome | 90+ | 待測 |
| Safari | 14+ | 待測 |
| Firefox | 88+ | 待測 |
| Edge | 90+ | 待測 |

#### 3.4 裝置相容性
| viewport | 尺寸 | 狀態 |
|----------|------|------|
| Mobile | < 768px | 待測 |
| Tablet | 768-1024px | 待測 |
| Desktop | > 1024px | 待測 |

---

### 4. 測試環境配置

```bash
# 當前運行中的服務
npm run dev
# http://localhost:3000/zh-TW
```

**測試語系**:
- ✅ zh-TW (繁體中文) - 主要測試目標
- ✅ en (英文) - 比對用
- ✅ ja (日文) - 比對用
- ✅ zh (簡體中文) - 比對用
- ✅ ar (阿拉伯文) - RTL 測試

---

### 5. 發現問題追蹤

| ID | 問題描述 | 嚴重程度 | 狀態 | 修復建議 |
|----|----------|----------|------|----------|
| P0-1 | station_wisdom_generated.ts 語法錯誤 | 🔴 阻斷 | 發現 | 修復陣列元素逗號 |
|    |                        |           |      |          |
|    |                        |           |      |          |

---

### 6. 測試執行順序

1. **Phase 1**: 修復阻斷性錯誤 (P0-1)
2. **Phase 2**: 語系切換驗證 (zh-TW)
3. **Phase 3**: 互動元素測試
4. **Phase 4**: 風險評估與效能測試
5. **Phase 5**: 跨瀏覽器/裝置測試

---

## 📊 Mermaid 測試流程圖

```mermaid
graph TD
    A[開始 UI 審查] --> B[修復阻斷性錯誤]
    B --> C[執行 npm run dev]
    C --> D{編譯成功?}
    D -->|否| B
    D -->|是| E[語系切換測試]
    E --> F[互動元素測試]
    F --> G[風險評估]
    G --> H[效能測試]
    H --> I[跨瀏覽器測試]
    I --> J[產生報告]
```

---

## ✅ 驗收標準

- [ ] 所有語系檔案載入正確
- [ ] 繁體中文 (zh-TW) 所有文字正確顯示
- [ ] 所有按鈕點擊有正確回應
- [ ] 無 JavaScript 錯誤
- [ ] 無記憶體洩漏跡象
- [ ] 頁面載入時間 < 3 秒
- [ ] 通過 Chrome/Safari/Firefox 測試

---

## 🔗 相關文件

- [i18n 配置](src/i18n.ts)
- [繁體中文語系檔](messages/zh-TW.json)
- [英文語系檔](messages/en.json)
- [UI 規格](06_UI_SPEC.md)
