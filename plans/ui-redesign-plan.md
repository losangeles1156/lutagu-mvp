# LUTAGU UI 重新設計計劃

> **版本**：v2.0  
> **日期**：2026-01-06  
> **模式**：Architect  
> **任務**：重新設計前端UI系統（移動端優先）

---

## 1. 核心設計原則

### 1.1 移動端優先策略
```
┌─────────────────────────────────────────────────────────────────┐
│                    移動端優先設計原則                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   1. 所有元件以手指觸控友善性為首要                               │
│      • 按鈕尺寸 ≥ 44x44 像素                                     │
│      • 誤觸率降至最低                                            │
│      • 足夠的點擊區域                                            │
│                                                                 │
│   2. 字體大小規範                                                 │
│      • 移動端基礎：14px 以上                                     │
│      • 桌面端彈性：可放大至 16-18px                               │
│      • 行高：1.5 倍                                              │
│                                                                 │
│   3. PWA 友好設計                                                 │
│      • 離線可用性考量                                            │
│      • 安裝提示                                                  │
│      • 響應式適配                                                │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 1.2 日系簡潔美學
- 大量留白
- 柔和漸變色調
- 精緻圓角設計（16px-24px）
- 細膩微互動效果

---

## 2. 系統設定區設計

### 2.1 右上角系統設定區

```
┌─────────────────────────────────────────────────────────────────┐
│                    系統設定區設計                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ┌───────────────────────────────────────────────────────┐    │
│   │                                                       │    │
│   │   ┌─────────────────────────────────────────────────┐│    │
│   │   │   [🌐 語言]  [👤 會員]  [⚙️ 設定]               ││    │
│   │   └─────────────────────────────────────────────────┘│    │
│   │                                                       │    │
│   │   未登入狀態：                                        │    │
│   │   ┌─────────────────────────────────────────────────┐│    │
│   │   │   👤                                            ││    │
│   │   │   [登入 / 註冊]                                 ││    │
│   │   └─────────────────────────────────────────────────┘│    │
│   │                                                       │    │
│   │   已登入狀態：                                        │    │
│   │   ┌─────────────────────────────────────────────────┐│    │
│   │   │   👤                                            ││    │
│   │   │   [用戶名]                                      ││    │
│   │   │   [▼]                                          ││    │
│   │   └─────────────────────────────────────────────────┘│    │
│   │                                                       │    │
│   │   展開後的下拉面板：                                   │    │
│   │   ┌─────────────────────────────────────────────────┐│    │
│   │   │                                                 ││    │
│   │   │   👤 用戶名                                      ││    │
│   │   │   user@example.com                              ││    │
│   │   │   ────────────────────────────────────────────  ││    │
│   │   │                                                 ││    │
│   │   │   [💬 我的對話]                                 ││    │
│   │   │   [⭐ 我的收藏]                                 ││    │
│   │   │   [📅 我的行程]                                 ││    │
│   │   │   [⚙️ 帳號設定]                                 ││    │
│   │   │   ────────────────────────────────────────────  ││    │
│   │   │                                                 ││    │
│   │   │   [🚪 登出]                                     ││    │
│   │   │                                                 ││    │
│   │   └─────────────────────────────────────────────────┘│    │
│   │                                                       │    │
│   └───────────────────────────────────────────────────────┘    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 2.2 展開式下拉面板功能

| 功能 | 圖示 | 說明 |
|------|------|------|
| 我的對話 | 💬 | 對話歷史記錄 |
| 我的收藏 | ⭐ | 收藏的站點 |
| 我的行程 | 📅 | 規劃的行程 |
| 帳號設定 | ⚙️ | 個人資料管理 |
| 登出 | 🚪 | 退出登入 |

---

## 3. 登入頁面重新定位

### 3.1 登入功能整合策略
```
┌─────────────────────────────────────────────────────────────────┐
│                    登入功能整合策略                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ❌ 舊做法：                                                    │
│      • 登入搶佔頁面主要空間                                      │
│      • 大型登入表單                                              │
│      • 功能入口隱藏                                              │
│                                                                 │
│   ✅ 新做法：                                                    │
│      • 登入整合至右上角系統設定區                                 │
│      • 輕量級下拉面板                                            │
│      • 功能完整但不干擾主要操作流程                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 登入/註冊面板設計

```
┌─────────────────────────────────────────────────────────────────┐
│                    登入/註冊面板                                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ┌───────────────────────────────────────────────────────┐    │
│   │                                                       │    │
│   │   [🔑 登入]                           [✕ 關閉]       │    │
│   │                                                       │    │
│   │   ─────────────────────────────────────────────────   │    │
│   │                                                       │    │
│   │   ┌─────────────────────────────────────────────────┐│    │
│   │   │                                                 ││    │
│   │   │          🔐 登入 LUTAGU                          ││    │
│   │   │                                                 ││    │
│   │   │   登入後存取完整功能                             ││    │
│   │   │   • 對話歷史記錄                                ││    │
│   │   │   • 收藏站點                                    ││    │
│   │   │   • 個人化推薦                                  ││    │
│   │   │                                                 ││    │
│   │   └─────────────────────────────────────────────────┘│    │
│   │                                                       │    │
│   │   ┌─────────────────────────────────────────────────┐│    │
│   │   │                                                 ││    │
│   │   │   [🔵 Google 登入]                              ││    │
│   │   │                                                 ││    │
│   │   └─────────────────────────────────────────────────┘│    │
│   │                                                       │    │
│   │   ┌─────────────────────────────────────────────────┐│    │
│   │   │                                                 ││    │
│   │   │   [或使用 email 登入]                           ││    │
│   │   │                                                 ││    │
│   │   └─────────────────────────────────────────────────┘│    │
│   │                                                       │    │
│   │   ─────────────────────────────────────────────────   │    │
│   │                                                       │    │
│   │   還沒有帳號？ [立即註冊]                             │    │
│   │                                                       │    │
│   └───────────────────────────────────────────────────────┘    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 4. 移動端佈局設計

### 4.1 移動端主佈局

```
┌─────────────────────────────────────────────────────────────────┐
│                    移動端主佈局                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ┌───────────────────────────────────────────────────────┐    │
│   │  ┌─────────────────────────────────────────────────┐ │    │
│   │  │  [🦌 LUTAGU]    [🌐] [👤] [⚙️]                │ │    │
│   │  └─────────────────────────────────────────────────┘ │    │
│   ├───────────────────────────────────────────────────────┤    │
│   │                                                       │    │
│   │   ┌─────────────────────────────────────────────────┐│    │
│   │   │                                                 ││    │
│   │   │              📍 上野站                          ││    │
│   │   │                                                 ││    │
│   │   │    ┌─────────────────────────────────────────┐ ││    │
│   │   │    │                                         │ ││    │
│   │   │    │              🗺️ 地圖區域                 │ ││    │
│   │   │    │                                         │ ││    │
│   │   │    │    📍 淺草 ←────→ 📍 秋葉原             │ ││    │
│   │   │    │                                         │ ││    │
│   │   │    └─────────────────────────────────────────┘ ││    │
│   │   │                                                 ││    │
│   │   └─────────────────────────────────────────────────┘│    │
│   │                                                       │    │
│   │   ┌─────────────────────────────────────────────────┐│    │
│   │   │                                                 ││    │
│   │   │           [💬 問 LUTAGU AI]                     ││    │
│   │   │                                                 ││    │
│   │   └─────────────────────────────────────────────────┘│    │
│   │                                                       │    │
│   ├───────────────────────────────────────────────────────┤    │
│   │   [🗺️]    [🚇]    [📍]              [💬 AI]        │    │
│   └───────────────────────────────────────────────────────┘    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 4.2 底部導航欄設計

```
┌─────────────────────────────────────────────────────────────────┐
│                    底部導航欄規範                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ┌───────────────────────────────────────────────────────┐    │
│   │                                                       │    │
│   │   [探索]    [行程]    [我的]        [AI 助手]         │    │
│   │    🗺️        📅         👤              💬            │    │
│   │                                                       │    │
│   │   ─────────────────────────────────────────────────   │    │
│   │                                                       │    │
│   │   按鈕尺寸：                                            │    │
│   │   • 高度：56px                                         │    │
│   │   • 寬度：滿足最小 44x44 觸控區域                       │    │
│   │   • 圖示：24px                                         │    │
│   │   • 文字：10px                                         │    │
│   │                                                       │    │
│   │   狀態指示：                                            │    │
│   │   • 選中：主要顏色 + 背景                              │    │
│   │   • 未選中：灰色 + 透明                                │    │
│   │   • 點擊：縮小效果                                      │    │
│   │                                                       │    │
│   └───────────────────────────────────────────────────────┘    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 5. 對話框設計

### 5.1 AI 對話面板

```
┌─────────────────────────────────────────────────────────────────┐
│                    AI 對話面板設計                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ┌───────────────────────────────────────────────────────┐    │
│   │   [🦌 LUTAGU AI]                      [📋] [🔄] [✕] │    │
│   └───────────────────────────────────────────────────────┘    │
│                                                                 │
│   ┌───────────────────────────────────────────────────────┐    │
│   │   用戶情境： [🦽 輪椅] [👶 嬰兒車] [🧳 大行李]        │    │
│   └───────────────────────────────────────────────────────┘    │
│                                                                 │
│   ┌───────────────────────────────────────────────────────┐    │
│   │                    對話歷史                            │    │
│   │   ─────────────────────────────────────────────────   │    │
│   │                                                       │    │
│   │   🤖 LUTAGU AI                                        │    │
│   │   你好！我是 LUTAGU 東京交通 AI 助手。我可以：        │    │
│   │   • 提供即時列車運行情報                               │    │
│   │   • 規劃無障礙路線                                     │    │
│   │   • 推薦替代交通方案                                   │    │
│   │                                                       │    │
│   │   你現在在哪裡？想要去哪裡？                           │    │
│   │                                                       │    │
│   │   ─────────────────────────────────────────────────   │    │
│   │                                                       │    │
│   │                         👤 用戶                        │    │
│   │   上野到淺草怎麼走？                                   │    │
│   │                                                       │    │
│   │   ─────────────────────────────────────────────────   │    │
│   │                                                       │    │
│   │   🤖 LUTAGU AI                                        │    │
│   │   從上野到淺草推薦路線：                               │    │
│   │                                                       │    │
│   │   ┌───────────────────────────────────────────────┐  │    │
│   │   │  🚃 銀座線直達                                 │  │    │
│   │   │  5 分鐘 | ¥170 | 0 次轉乘                      │  │    │
│   │   │  💡 上野站 7 號出口有電梯                       │  │    │
│   │   └───────────────────────────────────────────────┘  │    │
│   │                                                       │    │
│   └───────────────────────────────────────────────────────┘    │
│                                                                 │
│   ┌───────────────────────────────────────────────────────┐    │
│   │                  操作按鈕區                            │    │
│   │   [🔄 新對話]  [📋 複製]  [👍👎]                     │    │
│   └───────────────────────────────────────────────────────┘    │
│                                                                 │
│   ┌───────────────────────────────────────────────────────┐    │
│   │                  輸入區域                              │    │
│   │   ┌─────────────────────────────────────────────────┐ │    │
│   │   │  輸入問題...                            [↑ 發送]│ │    │
│   │   └─────────────────────────────────────────────────┘ │    │
│   └───────────────────────────────────────────────────────┘    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 5.2 控制按鈕功能

| 按鈕 | 圖示 | 功能 |
|------|------|------|
| 新對話 | 🔄 | 重新開始對話 |
| 複製 | 📋 | 複製回覆內容 |
| 評價 | 👍👎 | 回饋評價 |

---

## 6. 日期時間選擇器

### 6.1 統一日曆選擇器

```
┌─────────────────────────────────────────────────────────────────┐
│                    日期時間選擇器設計                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ┌───────────────────────────────────────────────────────┐    │
│   │   [📅 日期時間選擇]                    [✕ 取消] [✓ 確認]│    │
│   └───────────────────────────────────────────────────────┘    │
│                                                                 │
│   ┌───────────────────────────────────────────────────────┐    │
│   │                                                       │    │
│   │     ◀  2026年 1月  ▶                                 │    │
│   │   ┌───┬───┬───┬───┬───┬───┬───┐                    │    │
│   │   │ 日 │ 一 │ 二 │ 三 │ 四 │ 五 │ 六 │              │    │
│   │   ├───┼───┼───┼───┼───┼───┼───┤                    │    │
│   │   │ 29│ 30│ 31│ 1 │ 2 │ 3 │ 4 │                     │    │
│   │   ├───┼───┼───┼───┼───┼───┼───┤                    │    │
│   │   │ 5 │ 6 │ 7 │ 8 │ 9 │10 │11 │                     │    │
│   │   ├───┼───┼───┼───┼───┼───┼───┤                    │    │
│   │   │12 │13 │14 │15 │16 │17 │18 │                     │    │
│   │   ├───┼───┼───┼───┼───┼───┼───┤                    │    │
│   │   │19 │20 │21 │22 │23 │24 │25 │                     │    │
│   │   ├───┼───┼───┼───┼───┼───┼───┤                    │    │
│   │   │26 │27 │28 │29 │30 │31 │ 1 │                     │    │
│   │   └───┴───┴───┴───┴───┴───┴───┘                    │    │
│   │                                                       │    │
│   │   ─────────────────────────────────────────────────   │    │
│   │                                                       │    │
│   │   🕐 時間：                                            │    │
│   │   ┌─────────────────────────────────────────────────┐ │    │
│   │   │    14    :    30    :    00                     │ │    │
│   │   │    ▲          ▲          ▲                      │ │    │
│   │   │   小時       分鐘       秒                       │ │    │
│   │   └─────────────────────────────────────────────────┘ │    │
│   │                                                       │    │
│   │   快速選擇： [現在] [今天 18:00] [明天 10:00]         │    │
│   │                                                       │    │
│   └───────────────────────────────────────────────────────┘    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 7. 縣市選擇器（台灣用戶習慣）

### 7.1 分層級聯式選擇器

```
┌─────────────────────────────────────────────────────────────────┐
│                    縣市選擇器設計                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ┌───────────────────────────────────────────────────────┐    │
│   │   [📍 選擇地點]                          [✕ 取消] [✓ 確認]│    │
│   └───────────────────────────────────────────────────────┘    │
│                                                                 │
│   ┌───────────────────────────────────────────────────────┐    │
│   │                                                       │    │
│   │   ┌─────────────────────┐  ┌─────────────────────┐   │    │
│   │   │     縣市           │  │     區域            │   │    │
│   │   ├─────────────────────┤  ├─────────────────────┤   │    │
│   │   │ 🔥 台北市          │  │                     │   │    │
│   │   │ 🔥 新北市          │  │   請先選擇縣市       │   │    │
│   │   │    桃園市          │  │                     │   │    │
│   │   │    台中市          │  │                     │   │    │
│   │   │    台南市          │  │                     │   │    │
│   │   │    高雄市          │  │                     │   │    │
│   │   │    基隆市          │  │                     │   │    │
│   │   │    新竹市          │  │                     │   │    │
│   │   │    嘉義市          │  │                     │   │    │
│   │   └─────────────────────┘  └─────────────────────┘   │    │
│   │                                                       │    │
│   │   ─────────────────────────────────────────────────   │    │
│   │                                                       │    │
│   │   🔍 搜尋： [輸入縣市名稱...]                          │    │
│   │   [🔥 台北市] [🔥 新北市] [🔥 台中市]                 │    │
│   │                                                       │    │
│   └───────────────────────────────────────────────────────┘    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 7.2 熱門縣市快速選擇

| 縣市 | 標籤 |
|------|------|
| 台北市 | 🔥 熱門 |
| 新北市 | 🔥 熱門 |
| 台中市 | 🔥 熱門 |
| 高雄市 | 🔥 熱門 |

---

## 8. 表單輸入規範

### 8.1 輸入欄位設計

```
┌─────────────────────────────────────────────────────────────────┐
│                    輸入欄位設計規範                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ┌───────────────────────────────────────────────────────┐    │
│   │                                                       │    │
│   │   📧 電子郵件                                         │    │
│   │   ┌─────────────────────────────────────────────────┐ │    │
│   │   │  user@example.com                      [✓]      │ │    │
│   │   └─────────────────────────────────────────────────┘ │    │
│   │   <span class="text-xs text-gray-500">               │    │
│   │   請輸入有效的電子郵件地址                             │    │
│   │   </span>                                             │    │
│   │                                                       │    │
│   │   ─────────────────────────────────────────────────   │    │
│   │                                                       │    │
│   │   🔒 密碼                                             │    │
│   │   ┌─────────────────────────────────────────────────┐ │    │
│   │   │  **********                            [👁️ 顯示] │ │    │
│   │   └─────────────────────────────────────────────────┘ │    │
│   │   <span class="text-xs text-gray-500">               │    │
│   │   至少 8 個字符，包含字母和數字                        │    │
│   │   </span>                                             │    │
│   │                                                       │    │
│   │   ─────────────────────────────────────────────────   │    │
│   │                                                       │    │
│   │   🔄 確認密碼                                         │    │
│   │   ┌─────────────────────────────────────────────────┐ │    │
│   │   │  **********                            [✗]      │ │    │
│   │   └─────────────────────────────────────────────────┘ │    │
│   │   <span class="text-xs text-red-500">                │    │
│   │   密碼不匹配                                           │    │
│   │   </span>                                             │    │
│   │                                                       │    │
│   └───────────────────────────────────────────────────────┘    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 8.2 驗證回饋設計

| 狀態 | 圖示 | 顏色 | 說明 |
|------|------|------|------|
| 驗證中 | ⏳ | 灰色 | 處理中 |
| 成功 | ✓ | 綠色 | 通過驗證 |
| 錯誤 | ✗ | 紅色 | 驗證失敗 |
| 警告 | ⚠️ | 橙色 | 需要注意 |

---

## 9. PWA 導航設計

### 9.1 返回與導航規範

```
┌─────────────────────────────────────────────────────────────────┐
│                    PWA 導航規範                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   1. 返回操作                                                   │
│   ┌───────────────────────────────────────────────────────┐    │
│   │   ◀ 返回                                              │    │
│   │                                                       │    │
│   │   特性：                                               │    │
│   │   • 固定頂部左側                                       │    │
│   │   • 尺寸：44x44 像素                                   │    │
│   │   • 始終可見                                           │    │
│   └───────────────────────────────────────────────────────┘    │
│                                                                 │
│   2. 上一步操作                                                 │    │
│   ┌───────────────────────────────────────────────────────┐    │
│   │   ↩ 復原                                              │    │
│   │                                                       │    │
│   │   特性：                                               │    │
│   │   • 顯示在操作後出現                                   │    │
│   │   • 5秒後自動隱藏                                      │    │
│   │   • 可觸控                                             │    │
│   └───────────────────────────────────────────────────────┘    │
│                                                                 │
│   3. 系統狀態回饋                                               │    │
│   ┌───────────────────────────────────────────────────────┐    │
│   │   ✅ 操作成功                                          │    │
│   │                                                       │    │
│   │   類型：                                               │    │
│   │   • Toast 通知（輕量）                                 │    │
│   │   • Snackbar（中度）                                   │    │
│   │   • Modal（重要）                                      │    │
│   └───────────────────────────────────────────────────────┘    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 10. 實施計劃

### Phase 1: 基礎設施
1. 更新 `MainLayout.tsx` 系統設定區
2. 新增 `SystemMenu` 組件
3. 新增 `UserDropdown` 組件

### Phase 2: 登入功能
1. 新增 `LoginPanel` 組件
2. 整合 Google 登入
3. 新增 Magic Link 登入

### Phase 3: 對話面板
1. 新增 `ChatPanel` 組件
2. 新增 `ConversationHistory` 組件
3. 新增 `RestartConversationBtn` 組件

### Phase 4: 選擇器
1. 新增 `DateTimePicker` 組件
2. 新增 `LocationSelector` 組件
3. 新增表單驗證組件

### Phase 5: 響應式優化
1. 移動端佈局適配
2. 觸控優化
3. 動畫效果

---

## 11. 驗收標準

- [ ] 登入功能在右上角系統設定區
- [ ] 按鈕尺寸 ≥ 44x44 像素
- [ ] 移動端佈局正確
- [ ] 日期時間選擇器直覺
- [ ] 縣市選擇器支援快速選擇
- [ ] 所有功能無需說明文件即可操作
- [ ] 返回與上一步隨時可達
- [ ] 系統狀態有清晰回饋

---

> **計劃完成日期**：2026-01-06  
> **下一步**：切換至 Code 模式實施
