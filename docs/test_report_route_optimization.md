# 路線規劃演算法優化測試報告

## 測試背景
為了提升路線規劃的合理性與使用者體驗，我們針對現有的轉乘邏輯進行了優化，特別是針對長距離轉乘（如藏前站）與特定路段優先級（如上野至新宿經神田）進行了調整。

## 優化內容
1. **轉乘資料庫 (Transfer Database)**: 引入精確的轉乘距離、設施（電梯/扶梯）與站外轉乘標記。
2. **加權評分系統 (Weighted Scoring)**:
   - 60% 行程時間
   - 20% 轉乘次數
   - 15% 轉乘距離（超過 150m 給予顯著懲罰）
   - 5% 擁擠程度
3. **轉乘痛感指數 (TPI)**: 結合資料庫數據，動態計算轉乘難度。

## 測試案例與結果

### 測試案例 1: 上野 -> 新宿 (Ueno to Shinjuku)
*   **預期結果**: 優先推薦經由 **神田** 轉乘的路線（快速、步行距離短），而非直達的山手線或經由赤羽的路線。
*   **優化前**: 系統可能優先推薦 30 分鐘的直達路線或經由赤羽的遠路。
*   **優化後結果**:
    - **第一名 (最佳建議)**: 經由神田轉乘 (19 分鐘) ✅
    - **第二名 (最舒適)**: 山手線直達 (30 分鐘) ✅
*   **結論**: 成功識別出神田轉乘的優勢（30m 扶梯轉乘），有效縮短行程時間。

### 測試案例 2: 淺草 -> 都廳前 (Asakusa to Tochomae)
*   **預期結果**: 避免在 **藏前** 進行站外長距離轉乘 (270m)，改為推薦時間稍長但轉乘更輕鬆的路線（如經由大門）。
*   **優化前**: 系統會因為藏前轉乘時間最短而將其列為首選，忽略了 270m 站外步行的痛苦。
*   **優化後結果**:
    - **最佳建議**: 經由大門轉乘 (45 分鐘) ✅
    - **最快到達**: 經由藏前轉乘 (38 分鐘) - 仍保留給追求速度的使用者
*   **結論**: 成功透過 150m 閾值懲罰機制，將「陷阱轉乘」從最佳建議中排除。

## 效能分析
- **搜尋深度**: 演算法在 1150 個站點的拓樸中運行穩定。
- **計算耗時**: 引入加權評分後，計算延遲增加極微，保持在毫秒級。

## 總結
本次優化成功解決了使用者提出的核心問題，透過資料驅動的加權評分系統，使路線規劃更貼近真實使用場景。
