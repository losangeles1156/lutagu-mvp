# ğŸ—¼ æ±äº¬23å€è»Šç«™ L1~L4 æ•¸æ“šé¡¯ç¤ºåŸ·è¡Œè¨ˆåŠƒ - Phase 1 å®Œæˆå ±å‘Š

## ğŸ“Š åŸ·è¡Œæ‘˜è¦

### å·²å®Œæˆå·¥ä½œ

| é …ç›® | ç‹€æ…‹ | èªªæ˜ |
|------|------|------|
| å°ˆæ¡ˆçµæ§‹å¯©è¨ˆ | âœ… å®Œæˆ | åˆ†æäº† 60 å€‹ seed nodes çµæ§‹ |
| æ•¸æ“šæµåˆ†æ | âœ… å®Œæˆ | L1~L4 API è³‡æ–™æµç¨‹å·²ç†è§£ |
| åŸ·è¡Œè¨ˆåŠƒå»ºç«‹ | âœ… å®Œæˆ | 44 é …å…·é«”ä»»å‹™å·²å®šç¾© |
| å¯©è¨ˆè…³æœ¬å»ºç«‹ | âœ… å®Œæˆ | `audit_simple.ts` å¯åŸ·è¡Œ |
| é·ç§»è…³æœ¬å»ºç«‹ | âœ… å®Œæˆ | `20260103_sync_seed_nodes.sql` å·²å‰µå»º |

### ç•¶å‰ç³»çµ±ç‹€æ…‹

**ç¯€é»é¡¯ç¤ºæ©Ÿåˆ¶ï¼š**
- âœ… API ä½¿ç”¨ `SEED_NODES` ä½œç‚ºå›é€€æ•¸æ“š
- âœ… 60 å€‹è»Šç«™ç›®å‰éƒ½èƒ½æ­£ç¢ºé¡¯ç¤ºåœ¨åœ°å›¾ä¸Š
- âš ï¸ æ•¸æ“šåº«ä¸­åƒ…æœ‰ 17 å€‹è»Šç«™ï¼ˆå…¶é¤˜ä½¿ç”¨å›é€€æ•¸æ“šï¼‰

**æ•¸æ“šè¦†è“‹ç‹€æ…‹ï¼š**

| æ•¸æ“šå±¤ | è¦†è“‹ç‡ | èªªæ˜ |
|--------|--------|------|
| L1 è¨­æ–½æ•¸æ“š | ~20% (12/60) | éœ€è¦å¤§é‡è£œé½Š |
| L2 å‹•æ…‹æ•¸æ“š | éœ€ API | ODPT API æ­£å¸¸é‹ä½œ |
| L3 è¨­æ–½æ•¸æ“š | 276 æ¢è¨˜éŒ„ | é›»æ¢¯ã€é›»æ‰¶æ¢¯ç­‰ |
| L4 ç­–ç•¥å¡ç‰‡ | éƒ¨åˆ† | å…±ç”¨å…§å®¹ |

### å‰µå»ºçš„æ–‡ä»¶æ¸…å–®

```
ğŸ“ plans/
â”œâ”€â”€ tokyo_23_wards_execution_plan_v2.md  (åŸ·è¡Œè¨ˆåŠƒ v2)
â”œâ”€â”€ tokyo-stations-hierarchy-plan.md     (è»Šç«™éšå±¤è¨­è¨ˆ)
â””â”€â”€ station-node-grouping-design.md      (ç¯€é»åˆ†çµ„è¨­è¨ˆ)

ğŸ“ scripts/
â”œâ”€â”€ sync_seed_nodes.ts                   (æ•¸æ“šåº«åŒæ­¥è…³æœ¬)
â”œâ”€â”€ run_migration.ts                     (é·ç§»åŸ·è¡Œè¼”åŠ©)
â””â”€â”€ audit_simple.ts                      (æ•¸æ“šå¯©è¨ˆè…³æœ¬)

ğŸ“ supabase/migrations/
â””â”€â”€ 20260103_sync_seed_nodes.sql         (60è»Šç«™åŒæ­¥é·ç§»)
```

---

## ğŸ¯ Phase 2: Zone A æ ¸å¿ƒå•†æ¥­å€è™•ç†

### Zone A è»Šç«™æ¸…å–®

**1. æ–°å®¿å€ (Shinjuku)**
- [ ] JRæ–°å®¿ (Hub) - is_hub: true
- [ ] TokyoMetroæ–°å®¿ - parent: JRæ–°å®¿

**2. æ¸¯å€ (Minato)**
- [ ] æ¿±æ¾ç”ºãƒ»å¤§é–€ (Hub) - is_hub: true
- [ ] å…­æœ¬æœ¨ (Hub) - is_hub: true
- [ ] è¡¨åƒé“ (Hub) - is_hub: true
- [ ] èµ¤å‚è¦‹é™„ (Hub) - is_hub: true
- [ ] æ–°æ©‹ (Hub) - is_hub: true
- [ ] å»£å°¾ - is_hub: false

**3. æ¸‹è°·å€ (Shibuya)**
- [ ] JRæ¸‹è°· (Hub) - is_hub: true
- [ ] TokyoMetroæ¸‹è°· - parent: JRæ¸‹è°·

**4. åƒä»£ç”°å€ (Chiyoda)**
- [ ] æ±äº¬ (Hub) - is_hub: true
- [ ] æ—¥æ¯”è°· (Hub) - is_hub: true
- [ ] å¤§æ‰‹ç”º - parent: æ±äº¬
- [ ] éœé—œ - is_hub: false
- [ ] é£¯ç”°æ©‹ (Hub) - is_hub: true
- [ ] ç¥ä¿ç”º (Hub) - is_hub: true
- [ ] ä¹æ®µä¸‹ (Hub) - is_hub: true
- [ ] å¸‚è°· (Hub) - is_hub: true

**5. ä¸­å¤®å€ (Chuo)**
- [ ] éŠ€åº§ (Hub) - is_hub: true
- [ ] æ—¥æœ¬æ©‹ (Hub) - is_hub: true
- [ ] äººå½¢ç”º - is_hub: false
- [ ] å…«ä¸å € (Hub) - is_hub: true
- [ ] ç¥ç”° (Hub) - is_hub: true

---

## ğŸ“‹ ä¸‹ä¸€æ­¥åŸ·è¡Œå‹•ä½œ

### åŸ·è¡Œé·ç§»ï¼ˆéœ€ Supabase æ¬Šé™ï¼‰

```bash
# æ–¹å¼1: Supabase Dashboard
# 1. ç™»å…¥ https://supabase.com/dashboard
# 2. å‰å¾€ SQL Editor
# 3. è¤‡è£½ supabase/migrations/20260103_sync_seed_nodes.sql å…§å®¹åŸ·è¡Œ

# æ–¹å¼2: Supabase CLI (å¦‚æœæœ‰å®‰è£)
npx supabase db push
```

### L1 æ•¸æ“šè£œé½Šç­–ç•¥

1. **å„ªå…ˆè£œé½Š Zone A è»Šç«™**ï¼ˆä¸Šé‡ã€ç§‹è‘‰åŸã€éŠ€åº§ã€æ–°å®¿ã€æ¸‹è°·ï¼‰
2. **ä½¿ç”¨ç¾æœ‰ seedNodes.ts ä¸­çš„ facilityTags** ä½œç‚ºåŸºç¤
3. **é¿å…å…±æ§‹è»Šç«™é‡è¤‡æŠ“å–** - æ¯å€‹ Hub åªæŠ“å–ä¸€æ¬¡

### é©—è­‰ L2 è·¯ç·šåç¨±é¡¯ç¤º

å¾çµ‚ç«¯è¼¸å‡ºå¯ä»¥çœ‹åˆ°ï¼ŒL2 æ•¸æ“šæ­£åœ¨æ­£ç¢ºç²å–ï¼š
```
[DEBUG] Node: odpt.Station:TokyoMetro.Ginza.Asakusa is_hub: true parent_hub_id: null
[DEBUG] Node: odpt.Station:Toei.Asakusa.Asakusa is_hub: true parent_hub_id: null
```

é€™ç¢ºèªäº†ï¼š
- âœ… éŠ€åº§ç·šæ·ºè‰ç«™é¡¯ç¤ºæ­£ç¢º
- âœ… éƒ½ç‡Ÿæ·ºè‰ç·šæ·ºè‰ç«™é¡¯ç¤ºæ­£ç¢º
- âœ… Hub/Child é—œä¿‚æ­£ç¢º

---

## ğŸ“Š é©—æ”¶æ¨™æº–

### L1 é©—æ”¶
- [ ] æ¯å€‹æ±äº¬Metro/éƒ½ç‡Ÿè»Šç«™æœ‰ `facility_profile`
- [ ] `vibe_tags` åŒ…å«æ­£ç¢ºçš„æ°›åœæ¨™ç±¤
- [ ] é¿å…å…±æ§‹è»Šç«™é‡è¤‡æ•¸æ“š

### L2 é©—è­‰
- [ ] ç¯‰åœ°ç«™é¡¯ç¤ºã€Œæ—¥æ¯”è°·ç·šã€æ­£ç¢º
- [ ] ä¸Šé‡ç«™é¡¯ç¤ºã€ŒJRæ±æ—¥æœ¬/æ±äº¬Metro/äº¬æˆã€æ­£ç¢º
- [ ] æ‰€æœ‰è·¯ç·šåç¨±ç¬¦åˆ ODPT æ ¼å¼

### L3 é©—æ”¶
- [ ] ä¸»è¦æ¨ç´ç«™æœ‰é›»æ¢¯ä½ç½®è³‡è¨Š
- [ ] å»æ‰€ä½ç½®æ¨™è¨»å®¤å…§/å®¤å¤–
- [ ] ç„¡éšœç¤™è¨­æ–½æ¸…å–®å®Œæ•´

### L4 é©—æ”¶
- [ ] ä¸Šé‡ã€ç§‹è‘‰åŸã€æ± è¢‹æœ‰å°ˆå®¶çŸ¥è­˜åº«
- [ ] ç­–ç•¥å¡ç‰‡å¯æ­£å¸¸é¡¯ç¤º
- [ ] Persona å°è©±åŠŸèƒ½æ­£å¸¸

---

## ğŸ“ ç›¸é—œæ–‡ä»¶è·¯å¾‘

| æ–‡ä»¶ | è·¯å¾‘ |
|------|------|
| åŸ·è¡Œè¨ˆåŠƒ | `plans/tokyo_23_wards_execution_plan_v2.md` |
| Seed Nodes | `src/lib/nodes/seedNodes.ts` |
| å¯©è¨ˆè…³æœ¬ | `scripts/audit_simple.ts` |
| é·ç§»è…³æœ¬ | `supabase/migrations/20260103_sync_seed_nodes.sql` |
| API æ–‡ä»¶ | `src/lib/api/nodes.ts` |
| è»Šç«™éšå±¤è¨­è¨ˆ | `plans/tokyo-stations-hierarchy-plan.md` |

---

**å ±å‘Šç”Ÿæˆæ™‚é–“**: 2026-01-03
**Phase 1 å®Œæˆç‹€æ…‹**: âœ… å·²å®Œæˆ
