# ãƒ«ã‚¿ã‚°ï¼ˆLUTAGUï¼‰å››å±¤æ¨™ç±¤æ™ºæ…§äº¤é€šæ±ºç­–ç³»çµ±
# Four-Layer Tagging System - å¾Œç«¯æŠ€è¡“è¦æ ¼æ›¸

> **ç”¢å“åç¨±**ï¼šãƒ«ã‚¿ã‚°ï¼ˆLUTAGUï¼‰
> **å…§éƒ¨ä»£è™Ÿ**ï¼šLUTAGU
> **ç‰ˆæœ¬**ï¼šv3.2

---

## ğŸ¯ æœ¬æ–‡ä»¶çš„ä½¿ç”¨æ–¹å¼

```
çµ¦å¾Œç«¯é–‹ç™¼è€… / AI é–‹ç™¼ä»£ç†çš„æŒ‡å¼•ï¼š

1. æœ¬æ–‡ä»¶å®šç¾©æ•¸æ“šçµæ§‹èˆ‡é‹ç®—é‚è¼¯ï¼Œé UI å‘ˆç¾è¦ç¯„
2. L1-L4 æ˜¯ã€Œè³‡è¨Šç¶­åº¦ã€å€åˆ†ï¼Œéã€Œåœ°ç†ä½ç½®ã€å€åˆ†
3. åŒä¸€åœ°é»å¯åŒæ™‚æ“æœ‰ L1ï¼ˆä¸»æ¥­ï¼‰èˆ‡ L3ï¼ˆé™„åŠ æœå‹™ï¼‰æ¨™ç±¤
4. MVP éšæ®µèˆ‡æœªä¾†æ“´å±•æœ‰æ˜ç¢ºé‚Šç•Œï¼Œæ¶æ§‹éœ€ä¿ç•™æ“´å……ç©ºé–“
5. Token æ¶ˆè€—æ§åˆ¶æ˜¯æ ¸å¿ƒè¨­è¨ˆåŸå‰‡
```

---

## 1. ç³»çµ±æ¦‚è¿°

æœ¬ç³»çµ±é€éå››å±¤æ¨™ç±¤æ¶æ§‹ï¼Œå°‡éœæ…‹åœ°ç†æ•¸æ“šã€å³æ™‚å‹•æ…‹é¢¨éšªã€ç¡¬é«”è¨­æ–½èƒ½åŠ›èˆ‡äº¤é€šå°ˆå®¶ç¶“é©—é€²è¡Œè§£æ§‹èˆ‡é‡çµ„ï¼Œæ—¨åœ¨æä¾›ä½¿ç”¨è€…ã€Œè¶…è¶Šå°èˆªã€çš„æ™ºæ…§å‡ºè¡Œæ±ºç­–å»ºè­°ã€‚

### 1.1 å››å±¤æ¶æ§‹ç¸½è¦½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ãƒ«ã‚¿ã‚°ï¼ˆLUTAGUï¼‰å››å±¤æ¨™ç±¤æ¶æ§‹                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   L4 è¡Œå‹•å±¤ (Action Layer)                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚   æœ¬è³ªï¼šæ±ºç­–åŸ·è¡Œå¼•æ“                                             â”‚
â”‚   æ§‹æˆï¼šç¡¬è¨ˆç®—ï¼ˆODPTï¼‰+ è»Ÿå»ºè­°ï¼ˆå°ˆå®¶çŸ¥è­˜åº«ï¼‰+ ä½¿ç”¨è€…æ¬Šé‡          â”‚
â”‚   è§£æ±ºï¼šã€ŒèªçŸ¥è½å·®ã€å•é¡Œ                                         â”‚
â”‚   è¼¸å‡ºï¼šå…·é«”è¡Œå‹•å»ºè­°èˆ‡è­¦å‘Š                                       â”‚
â”‚                                                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                 â”‚
â”‚   L3 æœå‹™è¨­æ–½ (Service Facilities)                              â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚   æœ¬è³ªï¼šç¯€é»èˆ‡å‘¨é‚Šçš„ã€Œæœå‹™èƒ½åŠ›ã€                                 â”‚
â”‚   MVPï¼šè»Šç«™è¨­æ–½ + å¤–éƒ¨æœå‹™å•†é€£çµ                                 â”‚
â”‚   æœªä¾†ï¼šæ•´åˆå‘¨é‚Šåº—å®¶é™„åŠ æœå‹™                                     â”‚
â”‚   è§£æ±ºï¼šã€Œç¡¬é«”æ–·é»ã€å•é¡Œ                                         â”‚
â”‚                                                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                 â”‚
â”‚   L2 å³æ™‚ç‹€æ…‹ (Live Status)                                     â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚   æœ¬è³ªï¼šç’°å¢ƒç•°å‹•çš„æ•¸å€¼åŒ–ã€Œé¢¨éšªå› å­ã€                             â”‚
â”‚   ç¯„åœï¼šå¤©æ°£ã€åˆ—è»Šé‹è¡Œã€äººæ½®æ“æ“ åº¦                               â”‚
â”‚   è§£æ±ºï¼šã€Œæ•¸æ“šæ»¯å¾Œã€èˆ‡ã€Œæƒ…å¢ƒé¢¨éšªã€å•é¡Œ                           â”‚
â”‚   ç‰¹æ€§ï¼šä½œç‚ºå‹•æ…‹åŠ æ¬Šä¿‚æ•¸ï¼Œå³æ™‚ä¿®æ­£è·¯å¾‘æ–¹æ¡ˆ                       â”‚
â”‚                                                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                 â”‚
â”‚   L1 åœ°é»åŸºå›  (Location DNA)                                    â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚   æœ¬è³ªï¼šåº—å®¶/æ™¯é»çš„ã€Œä¸»è¦ç‡Ÿæ¥­æœå‹™ã€                              â”‚
â”‚   ä¾†æºï¼šOSM æ¨™ç±¤èšåˆçš„å€åŸŸæ€§æ ¼                                   â”‚
â”‚   è§£æ±ºï¼šã€Œç›®çš„åœ°å‹•æ©ŸåŒ¹é…ã€å•é¡Œ                                   â”‚
â”‚   ç‰¹æ€§ï¼šå›ç­”ã€Œæˆ‘æƒ³åš Xï¼Œæ‡‰è©²å»å“ªã€                               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 L1 èˆ‡ L3 çš„ç¶­åº¦å€åˆ†ï¼ˆé—œéµæ¦‚å¿µï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  L1 å’Œ L3 æ˜¯ã€Œè³‡è¨Šç¶­åº¦ã€å€åˆ†ï¼Œéã€Œåœ°ç†ä½ç½®ã€å€åˆ†                  â”‚
â”‚  åŒä¸€åœ°é»å¯åŒæ™‚æ“æœ‰ L1 å’Œ L3 æ¨™ç±¤ï¼ˆæœªä¾†æ“´å±•æ™‚ï¼‰                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   L1 = åº—å®¶/æ™¯é»çš„ã€Œä¸»è¦ç‡Ÿæ¥­æœå‹™ã€ï¼ˆè³£ä»€éº¼ã€åšä»€éº¼ï¼‰              â”‚
â”‚       â†’ å›ç­”ã€Œæˆ‘æƒ³åš Xï¼Œå»å“ªè£¡ã€                                 â”‚
â”‚       â†’ åŒ…å«ï¼šé¡åˆ¥ã€ä½ç½®ã€ç‡Ÿæ¥­æ™‚é–“                               â”‚
â”‚                                                                 â”‚
â”‚   L3 = è»Šç«™/åº—å®¶çš„ã€Œé™„åŠ æœå‹™èƒ½åŠ›ã€ï¼ˆæä¾›ä»€éº¼ä¾¿åˆ©ï¼‰                â”‚
â”‚       â†’ å›ç­”ã€Œæˆ‘éœ€è¦ Xï¼Œå“ªè£¡æœ‰ã€                                 â”‚
â”‚       â†’ åŒ…å«ï¼šå……é›»ã€WiFiã€å»æ‰€ã€ç½®ç‰©æ«ƒã€ecbo cloak ç­‰            â”‚
â”‚                                                                 â”‚
â”‚   MVP éšæ®µï¼šL3 åƒ…åŒ…å«è»Šç«™è¨­æ–½ + å¤–éƒ¨æœå‹™é€£çµ                     â”‚
â”‚   æœªä¾†æ“´å±•ï¼šL3 å¯æ•´åˆå‘¨é‚Šåº—å®¶çš„é™„åŠ æœå‹™è³‡è¨Š                       â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. L1 åœ°é»åŸºå›  (Location DNA)

### 2.1 å®šç¾©

åŸºæ–¼ OSMï¼ˆOpenStreetMapï¼‰æ¨™ç±¤èšåˆå‡ºçš„å€åŸŸæ€§æ ¼ï¼Œæè¿°åº—å®¶/æ™¯é»çš„ã€Œä¸»è¦ç‡Ÿæ¥­æœå‹™ã€ã€‚

### 2.2 æŠ€è¡“ç”¨é€”

- é€éå„é¡åˆ¥çš„å¯†åº¦åˆ†ä½ˆï¼Œç”Ÿæˆå€åŸŸæ€§æ ¼å‘é‡
- æ”¯æ´ã€Œç›®çš„åœ°å‹•æ©ŸåŒ¹é…ã€æŸ¥è©¢
- è®“ AI çŸ¥é“æŸç«™æ˜¯ã€Œè—¥å¦å¤©å ‚ã€è€Œéå–®ç´”çš„åº§æ¨™

### 2.3 è§£æ±ºçš„å•é¡Œ

| ä½¿ç”¨è€…æå• | L1 æä¾›çš„ç­”æ¡ˆ |
|-----------|--------------|
| ã€Œæƒ³è²·å‹•æ¼«å‘¨é‚Šã€ | â†’ ç§‹è‘‰åŸ |
| ã€Œæƒ³æ‰¾æ¨‚å™¨ã€ | â†’ ç¥ä¿ç”º |
| ã€Œæƒ³åƒéŸ“åœ‹æ–™ç†ã€ | â†’ å¤§ä¹…ä¿ |
| ã€Œæƒ³å–æ–‡é’å’–å•¡ã€ | â†’ æ¸…æ¾„ç™½æ²³ |
| ã€Œæƒ³ä½å¹³åƒ¹å•†å‹™æ—…é¤¨ã€ | â†’ ä¸Šé‡ã€æ–°æ©‹ |
| ã€Œæƒ³ä½æº«æ³‰æ—…é¤¨ã€ | â†’ ç®±æ ¹ã€ç†±æµ· |

### 2.4 åå¤§ä¸»é¡åˆ¥

| ID | åç¨± | åœ–ç¤º | OSM å°æ‡‰ | èªªæ˜ |
|----|------|------|----------|------|
| dining | é¤é£² | ğŸ½ï¸ | amenity=restaurant/cafe/fast_food | é¤å»³ã€å’–å•¡å»³ã€é€Ÿé£Ÿ |
| shopping | è³¼ç‰© | ğŸ›’ | shop=* | å•†åº—ã€ç™¾è²¨ã€è¶…å¸‚ã€è—¥å¦ |
| business | å•†å‹™ | ğŸ¢ | office=* | è¾¦å…¬å¤§æ¨“ã€æœƒè­°ä¸­å¿ƒ |
| medical | é†«ç™‚ | ğŸ¥ | amenity=hospital/clinic/pharmacy | é†«é™¢ã€è¨ºæ‰€ã€è—¥å±€ |
| leisure | ä¼‘é–’ | ğŸ­ | tourism=*/leisure=* | æ™¯é»ã€å¨›æ¨‚ã€å…¬åœ’ |
| finance | é‡‘è | ğŸ¦ | amenity=bank | éŠ€è¡Œï¼ˆATM å±¬ L3ï¼‰|
| accommodation | ä½å®¿ | ğŸ¨ | tourism=hotel/hostel | é£¯åº—ã€æ—…é¤¨ï¼ˆè©³è¦‹ 2.5ï¼‰|
| culture | æ–‡åŒ– | â›©ï¸ | amenity=place_of_worship/museum | ç¥ç¤¾ã€å¯ºå»Ÿã€åšç‰©é¤¨ |
| service | å…¬å…±æœå‹™ | ğŸ›ï¸ | amenity=townhall/police/post_office | å¸‚æ”¿ã€éƒµå±€ã€è­¦å¯Ÿå±€ |
| nature | è‡ªç„¶ | ğŸŒ³ | leisure=park/natural=* | å…¬åœ’ã€ç¶ åœ°ã€è‡ªç„¶æ™¯è§€ |

### 2.5 ä½å®¿é¡åˆ¥ç´°åˆ†

```
ä¸»é¡åˆ¥ï¼šä½å®¿ (accommodation)
â”œâ”€ ğŸ’¼ å¹³åƒ¹å•†å‹™ (business_hotel)
â”‚     ãƒ“ã‚¸ãƒã‚¹ãƒ›ãƒ†ãƒ«
â”‚     ç‰¹å¾µï¼šå–®äººæˆ¿ç‚ºä¸»ã€åƒ¹æ ¼å¯¦æƒ ã€äº¤é€šä¾¿åˆ©
â”‚     ä»£è¡¨å€åŸŸï¼šä¸Šé‡ã€æ–°æ©‹ã€ç¥ç”°
â”‚
â”œâ”€ â­ æ˜Ÿç´šé£¯åº— (luxury_hotel)
â”‚     é«˜ç´šãƒ›ãƒ†ãƒ«
â”‚     ç‰¹å¾µï¼šé«˜æª”æœå‹™ã€è¨­æ–½å®Œå–„ã€å“ç‰Œé€£é–
â”‚     ä»£è¡¨å€åŸŸï¼šéŠ€åº§ã€å…­æœ¬æœ¨ã€ä¸¸ä¹‹å…§
â”‚
â”œâ”€ ğŸ›ï¸ é’å¹´æ—…é¤¨ (hostel)
â”‚     ãƒ›ã‚¹ãƒ†ãƒ«
â”‚     ç‰¹å¾µï¼šèƒŒåŒ…å®¢ã€å¤šäººæˆ¿ã€ç¤¾äº¤æ°›åœ
â”‚     ä»£è¡¨å€åŸŸï¼šæ·ºè‰ã€ä¸Šé‡ã€è—å‰
â”‚
â”œâ”€ ğŸ’Š è† å›Šæ—…é¤¨ (capsule_hotel)
â”‚     ã‚«ãƒ—ã‚»ãƒ«ãƒ›ãƒ†ãƒ«
â”‚     ç‰¹å¾µï¼šç©ºé–“ç·Šæ¹Šã€åƒ¹æ ¼ä½å»‰ã€çŸ­æœŸä½å®¿
â”‚     ä»£è¡¨å€åŸŸï¼šæ–°å®¿ã€æ± è¢‹ã€ä¸Šé‡
â”‚
â”œâ”€ â™¨ï¸ æº«æ³‰æ—…é¤¨ (onsen_ryokan)
â”‚     æ¸©æ³‰æ—…é¤¨
â”‚     ç‰¹å¾µï¼šå‚³çµ±æ—¥å¼ã€æº«æ³‰è¨­æ–½ã€ä¸€æ³ŠäºŒé£Ÿ
â”‚     ä»£è¡¨å€åŸŸï¼šç®±æ ¹ã€ç†±æµ·ã€è‰æ´¥
â”‚
â””â”€ ğŸ¢ é•·ä½å…¬å¯“ (serviced_apartment)
      ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ / ã‚¦ã‚£ãƒ¼ã‚¯ãƒªãƒ¼ãƒãƒ³ã‚·ãƒ§ãƒ³
      ç‰¹å¾µï¼šé•·æœŸä½å®¿ã€å…¬å¯“å¼ã€è‡ªç‚Šè¨­æ–½ã€Weekly Mansion
      ä»£è¡¨ï¼šOakwoodã€Weekly Mansion Tokyoã€ä½å‹ä¸å‹•ç”¢ç³»åˆ—

âŒ æ’é™¤ï¼šæ°‘å®¿ï¼ˆæ•¸æ“šé›£ä»¥å»ºæ§‹ï¼‰
```

### 2.6 å…¶ä»–æ¬¡é¡åˆ¥ç¯„ä¾‹

```
ä¸»é¡åˆ¥ï¼šé¤é£² (dining)
â”œâ”€ ğŸœ æ‹‰éºµåº— (ramen)
â”œâ”€ ğŸ£ å£½å¸åº— (sushi)
â”œâ”€ â˜• å’–å•¡å»³ (cafe)
â”œâ”€ ğŸ± å®šé£Ÿå±‹ (teishoku)
â”œâ”€ ğŸº å±…é…’å±‹ (izakaya)
â””â”€ ğŸ› å’–å“©åº— (curry)

ä¸»é¡åˆ¥ï¼šè³¼ç‰© (shopping)
â”œâ”€ ğŸª ä¾¿åˆ©å•†åº— (convenience)
â”œâ”€ ğŸ’Š è—¥å¦åº— (drugstore)
â”œâ”€ ğŸ‘• æœé£¾åº— (clothing)
â”œâ”€ ğŸ ä¼´æ‰‹ç¦®åº— (souvenir)
â”œâ”€ ğŸ“± é›»å™¨åº— (electronics)
â”œâ”€ ğŸ¸ æ¨‚å™¨åº— (music_instrument)
â””â”€ ğŸ“š æ›¸åº— (bookstore)
```

### 2.7 å€åŸŸæ€§æ ¼å‘é‡

```typescript
interface LocationDNA {
  node_id: string;
  
  // AI äººæ ¼åŒ–æè¿°
  persona_description: LocalizedText;
  
  // ä¸»é¡åˆ¥å¯†åº¦åˆ†ä½ˆï¼ˆæ­£è¦åŒ–ï¼‰
  category_vector: {
    dining: number;
    shopping: number;
    accommodation: number;
    culture: number;
    // ... å…¶ä»–é¡åˆ¥
  };
  
  // ç‰¹è‰²æ¨™ç±¤ï¼ˆVibe Tagsï¼‰
  vibe_tags: {
    tag: string;                  // 'budget_hotel_hub'
    display_name: LocalizedText;  // 'å¹³åƒ¹ä½å®¿é›†æ•£åœ°'
    confidence: number;           // 0.88
  }[];
  
  // è©³ç´°é¡åˆ¥çµæ§‹
  categories: L1_Category[];
  
  calculated_at: Date;
}
```

### 2.8 è³‡æ–™çµæ§‹

```typescript
interface L1_Category {
  id: string;                    // 'accommodation'
  name: LocalizedText;           // {"zh-TW": "ä½å®¿", ...}
  icon: string;                  // 'ğŸ¨'
  count: number;                 // 45
  subcategories: L1_Subcategory[];
}

interface L1_Subcategory {
  id: string;                    // 'business_hotel'
  name: LocalizedText;           // {"zh-TW": "å¹³åƒ¹å•†å‹™", "ja": "ãƒ“ã‚¸ãƒã‚¹ãƒ›ãƒ†ãƒ«", ...}
  icon: string;                  // 'ğŸ’¼'
  count: number;                 // 18
  pois: L1_POI[];
}

interface L1_POI {
  id: string;
  name: LocalizedText;
  address: LocalizedText;
  direction: LocalizedText;      // ç›¸å°ä½ç½®ã€ŒåŒ—å£æ­¥è¡Œ3åˆ†é˜ã€
  distance_meters: number;
  coordinates: { lat: number; lng: number; };
  google_maps_url: string;       // å°èˆªé€£çµ
  
  // ç‡Ÿæ¥­è³‡è¨Š
  opening_hours?: string;
  opening_hours_display?: LocalizedText;
  
  // å¯é¸è³‡è¨Š
  rating?: number;
  price_range?: 'budget' | 'moderate' | 'expensive';
  tags?: string[];
}
```

---

## 3. L2 å³æ™‚ç‹€æ…‹ (Live Status)

### 3.1 å®šç¾©

å°‡ç’°å¢ƒç•°å‹•è½‰è­¯ç‚ºæ•¸å€¼åŒ–çš„ã€Œé¢¨éšªå› å­ã€ï¼Œä½œç‚ºå‹•æ…‹åŠ æ¬Šä¿‚æ•¸å°è·¯å¾‘æ–¹æ¡ˆé€²è¡Œå³æ™‚ä¿®æ­£ã€‚

### 3.2 æŠ€è¡“ç”¨é€”

- å°‡ã€Œä¸‹å¤§é›¨ã€è‡ªå‹•è½‰æ›ç‚ºã€Œè·¯å¾‘å„ªå…ˆæ¬Šï¼šå®¤å…§ > å®¤å¤–ã€
- å°‡ã€Œåˆ—è»Šå»¶èª¤ã€è½‰æ›ç‚ºã€Œæ›¿ä»£è·¯ç·šæ¬Šé‡æå‡ã€
- å°‡ã€Œäººæ½®æ“æ“ ã€è½‰æ›ç‚ºã€Œæ™‚æ®µè¿´é¿å»ºè­°ã€

### 3.3 é¢¨éšªå› å­é¡åˆ¥

```typescript
interface L2_LiveStatus {
  node_id: string;
  updated_at: Date;
  
  // åˆ—è»Šé‹è¡Œæƒ…å ±
  transit: {
    lines: {
      line_id: string;
      line_name: LocalizedText;
      operator: string;
      status: 'normal' | 'delay' | 'suspended' | 'cancelled';
      delay_minutes?: number;
      status_text?: LocalizedText;
      next_arrivals?: {
        destination: LocalizedText;
        minutes: number;
      }[];
    }[];
  };
  
  // å¤©æ°£ç‹€æ³
  weather: {
    temperature: number;
    condition: 'sunny' | 'cloudy' | 'rainy' | 'snowy' | 'stormy';
    humidity: number;
    forecast_3h: {
      time: string;
      condition: string;
      temperature: number;
    }[];
    alerts?: {
      type: 'rain' | 'snow' | 'heat' | 'typhoon' | 'earthquake';
      severity: 'advisory' | 'warning' | 'emergency';
      message: LocalizedText;
      issued_at: Date;
    }[];
  };
  
  // äººæ½®ç‹€æ³ï¼ˆMVPï¼šç”¨æˆ¶å›å ±ï¼‰
  crowding: {
    // ç”¨æˆ¶å›å ±çµ±è¨ˆ
    user_reports: {
      total_reports: number;
      distribution: {
        very_empty: number;    // éå¸¸ç©º
        empty: number;         // åç©º
        moderate: number;      // é©ä¸­
        crowded: number;       // æ“æ“ 
        very_crowded: number;  // éå¸¸æ“æ“ 
      };
      last_report_at?: Date;
    };
  };
}
```

### 3.4 æ•¸æ“šä¾†æºï¼ˆMVP vs æœªä¾†ï¼‰

| æ•¸æ“šé¡å‹ | MVP ä¾†æº | æœªä¾†æ“´å±• |
|----------|----------|----------|
| åˆ—è»Šé‹è¡Œæƒ…å ± | âœ… ODPT API | ç¶­æŒ |
| å¤©æ°£ç‹€æ³ | âœ… JMA / OpenWeather | ç¶­æŒ |
| ç·Šæ€¥è­¦å ± | âœ… JMA | ç¶­æŒ |
| äººæ½®ï¼ˆè»Šç«™ï¼‰ | âœ… ç”¨æˆ¶å›å ±ï¼ˆäº”ç´šæ„Ÿå—ï¼‰| ğŸ”® VACAN AIS |
| äººæ½®ï¼ˆè¨­æ–½ï¼‰ | âŒ ä¸æä¾› | ğŸ”® VACAN API |
| å»æ‰€æ»¿ç©º | âŒ ä¸æä¾› | ğŸ”® VACAN Throne |

---

## 4. L3 æœå‹™è¨­æ–½ (Service Facilities)

### 4.1 å®šç¾©

è»Šç«™çš„ã€Œç¡¬é«”ä¿éšœèƒ½åŠ›ã€+ å¤–éƒ¨æœå‹™å•†é€£çµï¼Œç”¨æ–¼è§£æ±ºä½¿ç”¨è€…çš„å³æ™‚éœ€æ±‚ã€‚

### 4.2 MVP vs æœªä¾†æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  L3 æ¶æ§‹æ¼”é€²                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   MVP éšæ®µ                                                       â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   Section Aï¼šè»Šç«™è¨­æ–½ï¼ˆå¾å®˜æ–¹è³‡æ–™å–å¾—ï¼‰                          â”‚
â”‚   â€¢ ç„¡éšœç¤™è¨­æ–½ï¼šé›»æ¢¯ã€ç„¡éšœç¤™é€šé“ã€ç„¡éšœç¤™å»æ‰€                     â”‚
â”‚   â€¢ è¦ªå­è¨­æ–½ï¼šè‚²å¬°å®¤ã€å“ºä¹³å®¤                                     â”‚
â”‚   â€¢ è¡›ç”Ÿè¨­æ–½ï¼šå»æ‰€                                               â”‚
â”‚   â€¢ ä¾¿åˆ©è¨­æ–½ï¼šå”®ç¥¨è™•ã€æœå‹™å°                                     â”‚
â”‚                                                                 â”‚
â”‚   Section Bï¼šå¤–éƒ¨æœå‹™é€£çµï¼ˆåƒ…æä¾›é€£çµï¼Œä¸æ•´åˆ APIï¼‰              â”‚
â”‚   â€¢ ç½®ç‰©æ«ƒæŸ¥è©¢é€£çµ                                               â”‚
â”‚   â€¢ ecbo cloak é€£çµ                                             â”‚
â”‚   â€¢ å…±äº«å–®è»Šé€£çµ                                                 â”‚
â”‚   â€¢ VACAN é€£çµï¼ˆå¦‚æœ‰ï¼‰                                          â”‚
â”‚   â€¢ è¨ˆç¨‹è»Šå«è»Šé€£çµ                                               â”‚
â”‚                                                                 â”‚
â”‚   â†’ é€éé€£çµé»æ“Šè¿½è¹¤ç”¨æˆ¶éœ€æ±‚ç¨‹åº¦                                 â”‚
â”‚                                                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                 â”‚
â”‚   æœªä¾†æ“´å±• ğŸ”®                                                    â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   Section Cï¼šå‘¨é‚Šåº—å®¶é™„åŠ æœå‹™                                    â”‚
â”‚   â€¢ å“ªå®¶å’–å•¡å»³æœ‰å……é›»æ’åº§                                         â”‚
â”‚   â€¢ å“ªå®¶ä¾¿åˆ©å•†åº—æœ‰ ecbo cloak                                    â”‚
â”‚   â€¢ å“ªå®¶ç™¾è²¨æœ‰å…è²» WiFi                                          â”‚
â”‚                                                                 â”‚
â”‚   â†’ éœ€å¤§é‡äººå·¥èª¿æŸ¥æˆ–åˆä½œå¤¥ä¼´æä¾›æ•¸æ“š                             â”‚
â”‚   â†’ æ ¹æ“š MVP é€£çµé»æ“Šæ•¸æ“šæ±ºå®šå„ªå…ˆæ•´åˆå“ªäº›                        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 è»Šç«™è¨­æ–½é¡åˆ¥ï¼ˆMVPï¼‰

#### 4.3.1 ç„¡éšœç¤™è¨­æ–½ï¼ˆAccessibilityï¼‰â­ æœ€é‡è¦

| ID | åç¨± | åœ–ç¤º | èªªæ˜ |
|----|------|------|------|
| elevator | é›»æ¢¯ | ğŸ›— | ä½ç½®ã€å¯é”æ¨“å±¤ã€è¼ªæ¤…å¯ç”¨ |
| escalator | é›»æ‰¶æ¢¯ | â¬†ï¸ | ä½ç½®ã€æ–¹å‘ï¼ˆä¸Š/ä¸‹/é›™å‘ï¼‰|
| accessible_route | ç„¡éšœç¤™é€šé“ | â™¿ | ç„¡éšæ¢¯è·¯ç·š |
| accessible_toilet | ç„¡éšœç¤™å»æ‰€ | ğŸš»â™¿ | è¼ªæ¤…å¯é€²å…¥ã€æ‰¶æ‰‹ |
| tactile_paving | å°ç›²ç£š | ğŸ¦¯ | è¦–éšœå°å¼•è¨­æ–½ |
| wheelchair_ramp | è¼ªæ¤…å¡é“ | ğŸ¦½ | å¡é“ä½ç½® |
| priority_seat | åšæ„›åº§ | ğŸ’º | å„ªå…ˆå¸­ä½ç½® |

#### 4.3.2 è¦ªå­è¨­æ–½ï¼ˆFamilyï¼‰

| ID | åç¨± | åœ–ç¤º | èªªæ˜ |
|----|------|------|------|
| baby_care | è‚²å¬°å®¤ | ğŸš¼ | å°¿å¸ƒå°ã€ç†±æ°´ |
| nursing_room | å“ºä¹³å®¤ | ğŸ¤± | ç¨ç«‹å“ºä¹³ç©ºé–“ |
| kids_toilet | å…’ç«¥å»æ‰€ | ğŸ§’ | å…’ç«¥å°ºå¯¸è¨­å‚™ |

#### 4.3.3 è¡›ç”Ÿè¨­æ–½ï¼ˆSanitaryï¼‰

| ID | åç¨± | åœ–ç¤º | èªªæ˜ |
|----|------|------|------|
| toilet | å»æ‰€ | ğŸš» | ä½ç½®ã€ç”·/å¥³/å…±ç”¨ |
| washlet | å…æ²»é¦¬æ¡¶ | ğŸš½ | æº«æ°´æ´—æ·¨ |

#### 4.3.4 æœå‹™è¨­æ–½ï¼ˆServiceï¼‰

| ID | åç¨± | åœ–ç¤º | èªªæ˜ |
|----|------|------|------|
| info_center | è§€å…‰æ¡ˆå…§æ‰€ | â„¹ï¸ | å¤šèªè¨€æœå‹™ |
| ticket_counter | å”®ç¥¨è™• | ğŸ« | JR/Metro/éƒ½ç‡Ÿå€åˆ† |
| lost_found | å¤±ç‰©æ‹›é ˜ | ğŸ“‹ | ä½ç½®ã€ç‡Ÿæ¥­æ™‚é–“ |

### 4.4 å¤–éƒ¨æœå‹™é€£çµï¼ˆMVPï¼‰

```typescript
interface ExternalServiceLink {
  id: string;
  type: 'locker' | 'ecbo_cloak' | 'bike_share' | 'vacan' | 'taxi';
  
  // é¡¯ç¤ºè³‡è¨Š
  name: LocalizedText;
  icon: string;
  description: LocalizedText;
  
  // é€£çµ
  url: string;
  
  // è¿½è¹¤ç”¨
  tracking_id: string;
}

// MVP å¤–éƒ¨æœå‹™é€£çµ
const EXTERNAL_SERVICES: ExternalServiceLink[] = [
  {
    id: 'coinlocker_navi',
    type: 'locker',
    name: { 'zh-TW': 'ç½®ç‰©æ«ƒæŸ¥è©¢', 'ja': 'ã‚³ã‚¤ãƒ³ãƒ­ãƒƒã‚«ãƒ¼æ¤œç´¢', 'en': 'Coin Locker Search' },
    icon: 'ğŸ§³',
    description: { 'zh-TW': 'æŸ¥è©¢è»Šç«™å‘¨é‚Šç½®ç‰©æ«ƒç©ºä½', ... },
    url: 'https://www.coinlocker-navi.com/',
    tracking_id: 'ext_locker_001',
  },
  {
    id: 'ecbo_cloak',
    type: 'ecbo_cloak',
    name: { 'zh-TW': 'ecbo cloak è¡Œæå¯„æ”¾', 'ja': 'ecbo cloak', 'en': 'ecbo cloak' },
    icon: 'ğŸ“¦',
    description: { 'zh-TW': 'åº—å®¶è¡Œæå¯„æ”¾æœå‹™é ç´„', ... },
    url: 'https://cloak.ecbo.io/',
    tracking_id: 'ext_ecbo_001',
  },
  {
    id: 'docomo_bikeshare',
    type: 'bike_share',
    name: { 'zh-TW': 'å…±äº«å–®è»Š', 'ja': 'ã‚·ã‚§ã‚¢ã‚µã‚¤ã‚¯ãƒ«', 'en': 'Bike Share' },
    icon: 'ğŸš²',
    description: { 'zh-TW': 'docomo å…±äº«å–®è»Šç§Ÿå€Ÿ', ... },
    url: 'https://docomo-cycle.jp/',
    tracking_id: 'ext_bike_001',
  },
  {
    id: 'go_taxi',
    type: 'taxi',
    name: { 'zh-TW': 'è¨ˆç¨‹è»Šå«è»Š', 'ja': 'ã‚¿ã‚¯ã‚·ãƒ¼é…è»Š', 'en': 'Taxi' },
    icon: 'ğŸš•',
    description: { 'zh-TW': 'GO ã‚¿ã‚¯ã‚·ãƒ¼ å«è»Šæœå‹™', ... },
    url: 'https://go.goinc.jp/',
    tracking_id: 'ext_taxi_001',
  },
];
```

### 4.5 è³‡æ–™çµæ§‹

```typescript
interface L3_ServiceFacilities {
  node_id: string;
  updated_at: Date;
  
  // Section Aï¼šè»Šç«™è¨­æ–½
  station_facilities: L3_Facility[];
  
  // Section Bï¼šå¤–éƒ¨æœå‹™é€£çµï¼ˆMVPï¼‰
  external_links: ExternalServiceLink[];
  
  // ç„¡éšœç¤™è©•åˆ†ï¼ˆç¶œåˆï¼‰
  accessibility_score: {
    wheelchair: 'full' | 'partial' | 'limited' | 'none';
    stroller: 'full' | 'partial' | 'limited' | 'none';
    visual_impairment: 'full' | 'partial' | 'limited' | 'none';
  };
  
  // æœªä¾†æ“´å±•ï¼šå‘¨é‚Šåº—å®¶è¨­æ–½
  // nearby_facilities?: L3_NearbyFacility[];
}

interface L3_Facility {
  id: string;
  type: string;
  name: LocalizedText;
  location: LocalizedText;       // ç›¸å°ä½ç½®ã€ŒåŒ—å£å‰ªç¥¨å£å¤–å·¦å´ã€
  floor?: string;
  exit?: string;
  
  attributes: {
    accessible_floors?: string[];
    wheelchair_ok?: boolean;
    gender?: 'male' | 'female' | 'unisex';
    accessible?: boolean;
    baby_care?: boolean;
  };
}
```

### 4.6 é€£çµé»æ“Šè¿½è¹¤

```typescript
// è¿½è¹¤ç”¨æˆ¶é»æ“Šå¤–éƒ¨é€£çµï¼Œç”¨æ–¼ç”¢å“é©—è­‰
interface LinkClickEvent {
  timestamp: Date;
  user_session: string;
  node_id: string;
  link_type: string;
  tracking_id: string;
  
  // ç”¨æ–¼åˆ†æéœ€æ±‚å„ªå…ˆç´š
  // é»æ“Šç‡é«˜ â†’ å„ªå…ˆæ•´åˆ API
}
```

---

## 5. L4 è¡Œå‹•å±¤ (Action Layer)

### 5.1 å®šç¾©

æ±ºç­–åŸ·è¡Œå¼•æ“ï¼Œæ•´åˆã€Œç¡¬è¨ˆç®—ã€èˆ‡ã€Œè»Ÿå»ºè­°ã€ï¼ŒåŸºæ–¼ã€Œç¯€é»èµ·é»åˆ¶ã€æä¾›å…·é«”è¡Œå‹•æ–¹æ¡ˆã€‚

### 5.2 ä¸‰å¤§æ§‹æˆè¦ç´ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  L4 = ç¡¬è¨ˆç®— + è»Ÿå»ºè­° + ä½¿ç”¨è€…æ¬Šé‡                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   ç¡¬è¨ˆç®—ï¼ˆHard Calculationï¼‰                                     â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   ä¾†æºï¼šODPT éœæ…‹æ•¸æ“š                                           â”‚
â”‚   å…§å®¹ï¼šç¥¨åƒ¹ã€è·¯å¾‘ã€æ™‚åˆ»è¡¨ã€è½‰ä¹˜è³‡è¨Š                             â”‚
â”‚   ç‰¹æ€§ï¼šç²¾ç¢ºã€å¯é©—è­‰ã€ä¸æ¶ˆè€— Token                               â”‚
â”‚                                                                 â”‚
â”‚   è»Ÿå»ºè­°ï¼ˆKnowledge Baseï¼‰                                       â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   ä¾†æºï¼šå°ˆå®¶çŸ¥è­˜åº«ï¼ˆäººå·¥å»ºç«‹ + æŒçºŒç´¯ç©ï¼‰                        â”‚
â”‚   å…§å®¹ï¼šè½‰ä¹˜é™·é˜±ã€ç¥¨åˆ¸æ”»ç•¥ã€æ­¥è¡Œé ç•™æ™‚é–“ã€è»Šç«™ç‰¹æ€§               â”‚
â”‚   ç‰¹æ€§ï¼šé€™æ˜¯æ ¸å¿ƒç«¶çˆ­åŠ›ï¼Google Maps ä¸æœƒå‘Šè¨´ä½ çš„äº‹               â”‚
â”‚                                                                 â”‚
â”‚   ä½¿ç”¨è€…æ¬Šé‡ï¼ˆUser Preferencesï¼‰                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   é¸é …ï¼šç„¡éšœç¤™ã€è¦ªå­ã€çœéŒ¢ã€è¶•æ™‚é–“ã€èˆ’é©åº¦                       â”‚
â”‚   ä½œç”¨ï¼šèª¿æ•´è·¯å¾‘æ’åºã€è§¸ç™¼ç‰¹å®šå»ºè­°                               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 å°ˆå®¶çŸ¥è­˜åº« (Knowledge Base)

```typescript
interface ExpertKnowledge {
  id: string;
  
  trigger: {
    station_ids?: string[];
    line_ids?: string[];
    transfer_patterns?: string[];
    user_states?: string[];
    time_patterns?: string[];
  };
  
  type: 'warning' | 'tip' | 'route_advice' | 'ticket_advice' | 'timing';
  icon: string;
  title: LocalizedText;
  content: LocalizedText;
  priority: number;
}

// å°ˆå®¶çŸ¥è­˜ç¯„ä¾‹
const KNOWLEDGE_EXAMPLES = [
  {
    id: 'tokyo-keiyoline',
    trigger: { station_ids: ['tokyo'], line_ids: ['keiyoline'] },
    type: 'warning',
    icon: 'âš ï¸',
    content: 'æ±äº¬è»Šç«™äº¬è‘‰ç·šåœ¨åœ°ä¸‹ 4 æ¨“ï¼Œæ­¥è¡Œéœ€ 10-15 åˆ†é˜ï¼Œå»ºè­°é ç•™æ™‚é–“'
  },
  {
    id: 'shinjuku-gates',
    trigger: { station_ids: ['shinjuku'] },
    type: 'warning',
    icon: 'ğŸ’¡',
    content: 'æ–°å®¿ç«™æœ‰ JR å’Œç§éµå¤šå€‹é–˜å£ï¼Œæ±å£ã€è¥¿å£ã€å—å£æ˜¯ä¸åŒå€åŸŸ'
  },
  {
    id: 'newyear-crowd',
    trigger: { time_patterns: ['12/31-01/03'] },
    type: 'warning',
    icon: 'ğŸ',
    content: 'è·¨å¹´æœŸé–“äººæ½®çœ¾å¤šï¼Œæ·ºè‰å¯ºã€æ˜æ²»ç¥å®®å‘¨é‚Šè»Šç«™æœƒéå¸¸æ“æ“ ï¼Œå»ºè­°ææ—©å‡ºç™¼æˆ–é¿é–‹å°–å³°'
  },
  {
    id: 'obon-crowd',
    trigger: { time_patterns: ['08/13-08/16'] },
    type: 'tip',
    icon: 'ğŸ®',
    content: 'ç›‚è˜­ç›†ç¯€æœŸé–“ï¼Œæ±äº¬å¾€è¿”åœ°æ–¹çš„æ–°å¹¹ç·šéå¸¸æ“æ“ ï¼Œå»ºè­°æå‰é è¨‚æŒ‡å®šå¸­'
  },
];
```

### 5.4 ä½¿ç”¨è€…æ¬Šé‡é¸é …

```typescript
interface UserPreferences {
  accessibility: {
    wheelchair: boolean;
    stroller: boolean;
    visual_impairment: boolean;
    elderly: boolean;
  };
  
  luggage: {
    large_luggage: boolean;
    multiple_bags: boolean;
  };
  
  travel_style: {
    rushing: boolean;
    budget: boolean;
    comfort: boolean;
    avoid_crowd: boolean;
    avoid_rain: boolean;
  };
  
  companions: {
    with_children: boolean;
    family_trip: boolean;
  };
}
```

### 5.5 MVP vs æœªä¾†åŠŸèƒ½

| åŠŸèƒ½ | MVP | æœªä¾†æ“´å±• |
|------|-----|----------|
| è·¯ç·šè¨ˆç®— | âœ… ODPT éœæ…‹æ•¸æ“š | å³æ™‚ç­æ¬¡æ•´åˆ |
| å°ˆå®¶çŸ¥è­˜åº« | âœ… äººå·¥å»ºç«‹æ ¸å¿ƒçŸ¥è­˜ | ç”¨æˆ¶åé¥‹ç´¯ç© |
| ç¥¨åƒ¹è¨ˆç®— | âœ… å–®ç¨‹ç¥¨åƒ¹ | ç¥¨åˆ¸æœ€ä½³åŒ–å»ºè­° |
| MaaS æ•´åˆ | âœ… æä¾›é€£çµ | ğŸ”® ç›´æ¥é ç´„ API |
| AI æ¨ç† | âœ… è¤‡é›œè¡çªæ™‚æ‰å•Ÿç”¨ | å€‹äººåŒ–æ·±åº¦å»ºè­° |

---

## 6. Token æ¶ˆè€—æ§åˆ¶ç­–ç•¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç›®æ¨™ï¼š80% æŸ¥è©¢ Zero-Tokenï¼Œåƒ… 20% è¤‡é›œæ±ºç­–æ¶ˆè€— AI               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   æŸ¥è©¢é¡å‹              è™•ç†æ–¹å¼              Token æ¶ˆè€—         â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚   L1 ç€è¦½              é è¨ˆç®— + å¿«å–          0                 â”‚
â”‚   L2 æŸ¥è©¢              API ç›´æ¥å›å‚³           0                 â”‚
â”‚   L3 æŸ¥è©¢              çµæ§‹åŒ–ç¯„æœ¬             0                 â”‚
â”‚   L4 ç°¡å–®å»ºè­°          è¦å‰‡å¼•æ“ + ç¯„æœ¬        0                 â”‚
â”‚   L4 è¤‡é›œæ±ºç­–          AI Agent æ¨ç†         ~500-1000          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. å•†æ¥­å°æµè¨­è¨ˆ (B2B)

| å±¤ç´š | MVP å°æµ | æœªä¾†æ“´å±• |
|------|----------|----------|
| L1 | åˆä½œåº—å®¶å„ªå…ˆé¡¯ç¤º | å„ªæƒ åˆ¸ç™¼æ”¾ |
| L2 | â€” | æƒ…å¢ƒæ¨æ’­ï¼ˆä¸‹é›¨ â†’ å®¤å…§å„ªæƒ ï¼‰|
| L3 | å¤–éƒ¨æœå‹™é€£çµï¼ˆè¿½è¹¤é»æ“Šï¼‰| ecbo/å…±äº«å–®è»Š API æ•´åˆï¼ˆåˆ†æ½¤ï¼‰|
| L4 | è¨ˆç¨‹è»Šé€£çµ | ç¥¨åˆ¸è³¼è²·å°æµã€é ç´„ API |

---

## 8. è¡“èªå°ç…§è¡¨

| å…§éƒ¨è¡“èª | UI Tab | ä¸­æ–‡ | æ—¥æ–‡ | è‹±æ–‡ |
|----------|--------|------|------|------|
| L1 åœ°é»åŸºå›  | DNA | åœ°é»åŸºå›  | ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³DNA | Location DNA |
| L2 å³æ™‚ç‹€æ…‹ | LIVE | å³æ™‚ç‹€æ…‹ | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  | Live Status |
| L3 æœå‹™è¨­æ–½ | FACILITY | æœå‹™è¨­æ–½ | ã‚µãƒ¼ãƒ“ã‚¹æ–½è¨­ | Facilities |
| L4 è¡Œå‹•å±¤ | LUTAGU | è¡Œå‹•å»ºè­° | ãŠã™ã™ã‚ | Recommendation |

---

*ç”¢å“åç¨±ï¼šãƒ«ã‚¿ã‚°ï¼ˆLUTAGUï¼‰*
*å…§éƒ¨ä»£è™Ÿï¼šLUTAGU*
*ç‰ˆæœ¬ï¼šv3.2 | æœ€å¾Œæ›´æ–°ï¼š2024-12-31*
*æœ¬æ–‡ä»¶ç‚ºå¾Œç«¯æŠ€è¡“è¦æ ¼ï¼Œå‰ç«¯ UI è¦æ ¼è«‹åƒé–± 06_UI_SPEC.md*
