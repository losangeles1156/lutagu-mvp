# ✨ LUTAGU - 城市感性導航服務 (Urban Empathy Navigation)

> **LUTAGU 是一個「AI 移動導引助手」——在你於日本旅行「卡住的時刻(不知道如何選擇)」，主動告訴你下一步應該怎麼做。**

它不是另一個地圖 App，也不是要取代 Google Maps 或乘換案內。 它是補上現有工具沒有給你的那一語意解釋層：「判斷與決策」。

---

## ✨ 名稱由來
**LUTAGU (ルタグ)**

> 「LU は鹿、LU は路。
>
> 鹿の斑点のように、
> すべての駅、すべての路線に、
> 私たちはタグをつけました。
>
> 運休？遅延？混雑？
> ひとつのタグで、今日の道がわかる。
>
> ルタグ ——
> AIも人も読める、やさしい道しるべ。」

LUTAGU 是一位溫柔的指引者，像守護靈一樣，根據即時數據為用戶提供最貼心的行動建議。它為城市中的每個節點貼上感性標籤 (Tag)，指引旅人前行。

## ❓ 想解決什麼問題？

東京交通資訊量很多、標示很細，但問題是：
**「查得到」不等於「知道該怎麼做」**

現有工具可以告訴你「從 A 到 B 要 15 分鐘」，但不會告訴你：
*   這 15 分鐘是什麼體驗？
*   會遇到什麼狀況？
*   你該注意什麼？

更根本的問題是：旅客不知道「自己不知道什麼」，所以不會問對問題。

## 🎯 目標族群

**不熟悉日本交通邏輯的外國旅客**

這不只是語言問題，而是「知識門檻」的問題：
*   台灣沒有「直通運轉」「並結運行」「振替輸送」這些概念
*   就算工具能查到，不知道該查什麼、怎麼判斷，還是會踩雷

## 🆚 和 Google Maps / 乘換案內 有什麼不同？

| 情境 | Google Maps / 乘換案內 | LUTAGU |
| :--- | :--- | :--- |
| **電車異常** | 你到現場才發現，自己重查 | 收到異常公告主動推播提醒你，並給替代方案 |
| **轉乘時間** | 顯示「15 分鐘」 | 告訴你「這 15 分鐘是 500m 地下通道，拖行李會很累」 |
| **站內轉乘** | 假設你知道怎麼走 | 告訴你「這個站轉乘要出站，不是站內連通」 |
| **替代方案** | 你要自己想到、自己查 | 主動推薦：換路線、改搭巴士、或先去附近等一下 |

> **一句話總結**：現有工具是「被動的百科全書」，LUTAGU 是「主動的在地嚮導」。

## 📍 MVP 驗證場域

**東京都心三區：台東區、千代田區、中央區**

| 理由 | 說明 |
| :--- | :--- |
| **觀光客密集** | 淺草、上野、東京車站、銀座——外國旅客最常出沒的區域 |
| **交通複雜度高** | JR、Metro、都營、私鐵交錯，轉乘陷阱多 |
| **數據完整** | ODPT 開放資料覆蓋率高，包含即時運行資訊 |
| **驗證場景豐富** | 新幹線轉乘、長距離站內步行、站間無連通——各種「卡住」情境都有 |

> **主因**: 東京開放數據太多，力量有限無法全部串接使用全部數據。

## 📊 核心技術：LUTAGU Tagging Engine

LUTAGU 的建議不是憑空生成，而是透過獨家的「LUTAGU Tagging Engine」整合四層數據：
**結構化資料 × 經驗規則 × 即時狀態**

1. **L1 (Location DNA)**: 靜態地理資訊與 POI
2. **L2 (Live Sense)**: 即時運行狀況與天氣
3. **L3 (Facility Graph)**: 車站設施與無障礙路徑
4. **L4 (Strategy Agent)**: 綜合決策與感性建議

這就是 LUTAGU 和純 AI 聊天機器人的差別——不是只靠 LLM 回答，而是有真實數據支撐。

## 💡 具體案例：LUTAGU 會怎麼幫你？

### 案例 1：東京站轉乘京葉線
*情境：你要從山手線轉京葉線去迪士尼*
*   **Google Maps**: 「轉乘 15 分鐘」
*   **LUTAGU**: ⚠️ 「京葉線月台距離其他路線約 500 公尺，需走一條長地下通道，建議預留 15-20 分鐘。拖行李會很累，考慮先寄放在置物櫃？」
    *   💡 **差異**：Google Maps 只給數字，LUTAGU 給你心理準備 + 可執行建議

### 案例 2：上野站搭新幹線
*情境：你要搭 10:00 從上野發車的新幹線*
*   **傳統做法**: 你自己估時間，9:55 到入口
*   **LUTAGU**: ⚠️ 「新幹線月台在地下四層，進站後到月台還需 10-15 分鐘。建議 9:40 前抵達上野站入口。」
    *   💡 **差異**：不是到現場才發現來不及，而是事前就提醒注意事項

### 案例 3：異常發生時的主動提醒
*情境：你訂閱了每天通勤的路線，今天銀座線有異常*
*   **傳統做法**: 到月台才發現電車沒來，查詢才知道延誤。
*   **LUTAGU**: 收到 ODPT 異常延誤數據主動推播：「銀座線目前有延誤，預計影響 20 分鐘。建議改搭丸之內線，路線已幫你查好 👉 [一鍵查看]」
    *   💡 **差異**：不是讓你到現場才開始重新查詢，而是提前幫你避開問題

---

## 🛠️ 技術架構

*   **前端框架**: [Next.js 14](https://nextjs.org/) (App Router)
*   **語言**: TypeScript
*   **樣式**: Tailwind CSS
*   **地圖**: React Leaflet / OpenStreetMap
*   **資料庫**: [Supabase](https://supabase.com/) (PostgreSQL + PostGIS)
*   **狀態管理**: Zustand
*   **AI 整合**: Dify API (RAG + Agents)
*   **部署**: Vercel / PWA

---

## 🏁 快速開始 (Getting Started)

### 前置需求
*   Node.js 18.17 或更高版本
*   npm 或 yarn

### 1. 下載專案
```bash
git clone https://github.com/losangeles1156/lutagu-mvp.git
cd lutagu-mvp
```

### 2. 安裝套件
```bash
npm install
```

### 3. 設定環境變數
將 `.env.example` 複製為 `.env.local` 並填入您的 API Keys：

```bash
cp .env.example .env.local
```

> **注意**：本專案依賴 Supabase 資料庫與 ODPT API，請確保您擁有相關的存取憑證。

### 4. 啟動開發伺服器
```bash
npm run dev
```

瀏覽器打開 [http://localhost:3000](http://localhost:3000) 即可看到應用程式。

---

## 📚 開發者文件

如果您希望深入了解系統設計，請參閱 `rules/` 目錄下的規格：

*   **專案規範**: `rules/lutagu_project_rules.md`
*   **開發規範**: `rules/project_rules.md`

---

## 📄 授權與數據來源

本專案使用 [日本公共交通開放數據中心 (ODPT)](https://www.odpt.org/) 提供的數據。
參賽作品：**日本公共交通開放數據挑戰賽 2025 (Open Data Challenge for Public Transportation in Tokyo 2025)**

---

*Made with ❤️ by the LUTAGU Team*
