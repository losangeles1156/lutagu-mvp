openapi: "3.0.0"
info:
  title: LUTAGU Tools
  description: Transit tools for Dify Agent
  version: "1.0.0"
servers:
  - url: https://lutagu.vercel.app
paths:
  /api/util/time:
    get:
      operationId: get_japan_time
      summary: Get Japan time
      description: Returns current JST time and period
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  jst_time:
                    type: string
                  hour_jst:
                    type: integer
                  period:
                    type: string
                  day_of_week:
                    type: string

  /api/weather:
    get:
      operationId: get_jma_alerts
      summary: Get weather alerts
      description: Returns JMA weather alerts for Tokyo
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object

  /api/station/context:
    get:
      operationId: get_station_context
      summary: Get station info
      description: Get station facilities and transfers
      parameters:
        - name: station_id
          in: query
          required: true
          description: Station ID
          schema:
            type: string
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object

  /api/odpt/route:
    get:
      operationId: search_route
      summary: Search route
      description: Find route between stations
      parameters:
        - name: from
          in: query
          required: true
          description: Origin station
          schema:
            type: string
        - name: to
          in: query
          required: true
          description: Destination station
          schema:
            type: string
        - name: locale
          in: query
          required: false
          description: Response language
          schema:
            type: string
            enum: [ja, en, zh-TW]
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object

  /api/l4/knowledge:
    get:
      operationId: get_l4_knowledge
      summary: 獲取 L4 專家知識 (包含轉乘、出口、無障礙等專家建議)
      parameters:
        - name: type
          in: query
          required: true
          description: 知識類型 (railway, station, accessibility, location, passes, crowd)
          schema:
            type: string
        - name: id
          in: query
          required: false
          description: 對應的 ID (如 odpt:Station:JR-East.Yamanote.Shinjuku)
          schema:
            type: string
        - name: min_priority
          in: query
          description: 最低優先級過濾 (0-100)，用於節省 Token。
          schema:
            type: integer
            default: 0
        - name: limit
          in: query
          description: 返回結果數量限制。
          schema:
            type: integer
            default: 10
      responses:
        200:
          description: 成功返回知識點列表
          content:
            application/json:
              schema:
                type: object

  /api/tools/hub-info:
    get:
      operationId: get_hub_info
      summary: Get hub info
      description: Get major station hub info
      parameters:
        - name: query
          in: query
          required: true
          description: Station name to search
          schema:
            type: string
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
